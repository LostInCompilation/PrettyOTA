<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="A better looking OTA web updater." />
        <title>PrettyOTA</title>
        <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='512' height='512' xmlns:v='https://vecta.io/nano'%3E%3Cpath d='M0 0h512v512H0V0z' fill='%23454545'/%3E%3Cpath d='M155.358 89.853l3.371-.022 3.702-.008 3.899-.02 12.826-.041 4.433-.012 20.87-.042 23.966-.077 18.589-.048 11.066-.036C292.726 89.32 320.276 95.427 346 120c11.511 11.857 19.348 26.184 24 42l.965 3.105c5.562 21.043 2.684 44.2-5.965 63.895l-1.305 3.02C353.52 253.952 333.683 272.57 311 281c-18.677 6.795-36.629 7.29-56.312 7.195l-6.927-.009-18.07-.049-18.503-.04L175 288l.008 1.852.147 44.672.071 21.603.056 18.836.035 9.967.023 11.146.033 3.313c-.029 7.064-.542 13.21-5.24 18.853-5.864 4.769-10.089 7.293-17.797 7.063-6.109-.797-10.049-3.552-13.773-8.367-3.032-4.304-3.689-7.59-3.71-12.825l-.022-3.726-.008-4.095-.02-4.307-.041-14.153-.012-4.876-.042-22.912-.077-26.427-.048-20.439-.036-12.201-.017-11.487-.02-4.204c-.077-8.341-.097-15.383 5.902-21.797 4.622-4.136 8.932-5.74 15.055-5.742l3.291-.016 3.581.012 3.796-.011 8.165-.008 12.956-.029 36.842-.077 20.356-.055 10.746-.017c23.798.055 43.383-.912 61.55-18.176 10.626-11.198 16.528-25.929 16.207-41.452-.849-16.206-6.779-30.028-17.957-41.919-13.741-11.13-27.272-15.31-44.812-15.271l-3.802-.016-8.137-.018-12.889-.041-32.003-.101-24.901-.083-12.79-.028-9.852-.042-3.543.014c-7.426-.066-14.612-.496-20.61-5.282-4.68-5.881-7.194-10.13-6.965-17.797.797-6.109 3.552-10.049 8.367-13.773 4.115-2.899 7.286-3.688 12.296-3.71z' fill='%232cb3a6'/%3E%3C/svg%3E" />
        <script type="module" crossorigin>
            const sleep = ms => new Promise(r => setTimeout(r, ms));
            const md5 = (function() {
                var MD5 = function (d) {
                    return M(V(Y(X(d), 8 * d.length)))
                }
                function M (d) {
                    for (var _, m = '0123456789abcdef', f = '', r = 0; r < d.length; r++) {
                        _ = d.charCodeAt(r)
                        f += m.charAt(_ >>> 4 & 15) + m.charAt(15 & _)
                    }
                    return f
                }
                function X (d) {
                    for (var _ = Array(d.length >> 2), m = 0; m < _.length; m++) {
                        _[m] = 0
                    }
                    for (m = 0; m < 8 * d.length; m += 8) {
                        _[m >> 5] |= (255 & d.charCodeAt(m / 8)) << m % 32
                    }
                    return _
                }
                function V (d) {
                    for (var _ = '', m = 0; m < 32 * d.length; m += 8) _ += String.fromCharCode(d[m >> 5] >>> m % 32 & 255)
                    return _
                }
                function Y (d, _) {
                    d[_ >> 5] |= 128 << _ % 32
                    d[14 + (_ + 64 >>> 9 << 4)] = _
                    for (var m = 1732584193, f = -271733879, r = -1732584194, i = 271733878, n = 0; n < d.length; n += 16) {
                        var h = m
                        var t = f
                        var g = r
                        var e = i
                        f = md5ii(f = md5ii(f = md5ii(f = md5ii(f = md5hh(f = md5hh(f = md5hh(f = md5hh(f = md5gg(f = md5gg(f = md5gg(f = md5gg(f = md5ff(f = md5ff(f = md5ff(f = md5ff(f, r = md5ff(r, i = md5ff(i, m = md5ff(m, f, r, i, d[n + 0], 7, -680876936), f, r, d[n + 1], 12, -389564586), m, f, d[n + 2], 17, 606105819), i, m, d[n + 3], 22, -1044525330), r = md5ff(r, i = md5ff(i, m = md5ff(m, f, r, i, d[n + 4], 7, -176418897), f, r, d[n + 5], 12, 1200080426), m, f, d[n + 6], 17, -1473231341), i, m, d[n + 7], 22, -45705983), r = md5ff(r, i = md5ff(i, m = md5ff(m, f, r, i, d[n + 8], 7, 1770035416), f, r, d[n + 9], 12, -1958414417), m, f, d[n + 10], 17, -42063), i, m, d[n + 11], 22, -1990404162), r = md5ff(r, i = md5ff(i, m = md5ff(m, f, r, i, d[n + 12], 7, 1804603682), f, r, d[n + 13], 12, -40341101), m, f, d[n + 14], 17, -1502002290), i, m, d[n + 15], 22, 1236535329), r = md5gg(r, i = md5gg(i, m = md5gg(m, f, r, i, d[n + 1], 5, -165796510), f, r, d[n + 6], 9, -1069501632), m, f, d[n + 11], 14, 643717713), i, m, d[n + 0], 20, -373897302), r = md5gg(r, i = md5gg(i, m = md5gg(m, f, r, i, d[n + 5], 5, -701558691), f, r, d[n + 10], 9, 38016083), m, f, d[n + 15], 14, -660478335), i, m, d[n + 4], 20, -405537848), r = md5gg(r, i = md5gg(i, m = md5gg(m, f, r, i, d[n + 9], 5, 568446438), f, r, d[n + 14], 9, -1019803690), m, f, d[n + 3], 14, -187363961), i, m, d[n + 8], 20, 1163531501), r = md5gg(r, i = md5gg(i, m = md5gg(m, f, r, i, d[n + 13], 5, -1444681467), f, r, d[n + 2], 9, -51403784), m, f, d[n + 7], 14, 1735328473), i, m, d[n + 12], 20, -1926607734), r = md5hh(r, i = md5hh(i, m = md5hh(m, f, r, i, d[n + 5], 4, -378558), f, r, d[n + 8], 11, -2022574463), m, f, d[n + 11], 16, 1839030562), i, m, d[n + 14], 23, -35309556), r = md5hh(r, i = md5hh(i, m = md5hh(m, f, r, i, d[n + 1], 4, -1530992060), f, r, d[n + 4], 11, 1272893353), m, f, d[n + 7], 16, -155497632), i, m, d[n + 10], 23, -1094730640), r = md5hh(r, i = md5hh(i, m = md5hh(m, f, r, i, d[n + 13], 4, 681279174), f, r, d[n + 0], 11, -358537222), m, f, d[n + 3], 16, -722521979), i, m, d[n + 6], 23, 76029189), r = md5hh(r, i = md5hh(i, m = md5hh(m, f, r, i, d[n + 9], 4, -640364487), f, r, d[n + 12], 11, -421815835), m, f, d[n + 15], 16, 530742520), i, m, d[n + 2], 23, -995338651), r = md5ii(r, i = md5ii(i, m = md5ii(m, f, r, i, d[n + 0], 6, -198630844), f, r, d[n + 7], 10, 1126891415), m, f, d[n + 14], 15, -1416354905), i, m, d[n + 5], 21, -57434055), r = md5ii(r, i = md5ii(i, m = md5ii(m, f, r, i, d[n + 12], 6, 1700485571), f, r, d[n + 3], 10, -1894986606), m, f, d[n + 10], 15, -1051523), i, m, d[n + 1], 21, -2054922799), r = md5ii(r, i = md5ii(i, m = md5ii(m, f, r, i, d[n + 8], 6, 1873313359), f, r, d[n + 15], 10, -30611744), m, f, d[n + 6], 15, -1560198380), i, m, d[n + 13], 21, 1309151649), r = md5ii(r, i = md5ii(i, m = md5ii(m, f, r, i, d[n + 4], 6, -145523070), f, r, d[n + 11], 10, -1120210379), m, f, d[n + 2], 15, 718787259), i, m, d[n + 9], 21, -343485551)
                        m = safeadd(m, h)
                        f = safeadd(f, t)
                        r = safeadd(r, g)
                        i = safeadd(i, e)
                    }
                    return [m, f, r, i]
                }
                function md5cmn (d, _, m, f, r, i) {
                    return safeadd(bitrol(safeadd(safeadd(_, d), safeadd(f, i)), r), m)
                }
                function md5ff (d, _, m, f, r, i, n) {
                    return md5cmn(_ & m | ~_ & f, d, _, r, i, n)
                }
                function md5gg (d, _, m, f, r, i, n) {
                    return md5cmn(_ & f | m & ~f, d, _, r, i, n)
                }
                function md5hh (d, _, m, f, r, i, n) {
                    return md5cmn(_ ^ m ^ f, d, _, r, i, n)
                }
                function md5ii (d, _, m, f, r, i, n) {
                    return md5cmn(m ^ (_ | ~f), d, _, r, i, n)
                }
                function safeadd (d, _) {
                    var m = (65535 & d) + (65535 & _)
                    return (d >> 16) + (_ >> 16) + (m >> 16) << 16 | 65535 & m
                }
                function bitrol (d, _) {
                    return d << _ | d >>> 32 - _
                }
                function MD5Unicode(buffer){
                    if (!(buffer instanceof Uint8Array)) {
                        buffer = new TextEncoder().encode(typeof buffer==='string' ? buffer : JSON.stringify(buffer));
                    }
                    var binary = [];
                    var bytes = new Uint8Array(buffer);
                    for (var i = 0, il = bytes.byteLength; i < il; i++) {
                        binary.push(String.fromCharCode(bytes[i]));
                    }
                    return MD5(binary.join(''));
                }
                return MD5Unicode;
            })();

            // Calculate hash from file
            const hashFromFile = async (file) => new Promise((resolve, reject) => {
                let reader = new FileReader();
                reader.onload = function (e) {
                    const data = new Uint8Array(e.target.result);
                    resolve(md5(data));
                };
                reader.readAsArrayBuffer(file);
            });

            // Do update
            async function runUpdate(file) {
                hideElement("uploadColumn");
                hideElement("settingsColumn");
                hideElement("boardColumn");
                hideElement("buttonColumn");
                await sleep(270);
                showElement("progressColumn");
                setProgressTitle("Starting OTA update");

                try {
                    const fileHash = await hashFromFile(file);
                    const otaMode = document.getElementById("otaMode").value;
                    const reboot = document.getElementById("rebootCheckboxInput").checked;

                    // Send ota-start request
                    const response = await fetch(`/prettyota/start?mode=${otaMode}&hash=${fileHash}&reboot=${reboot}`);
                    if (!response.ok)
                        throw new Error("Could not start OTA update");

                    let xhr = new XMLHttpRequest();
                    xhr.upload.onprogress = function (r) {
                        if (r.lengthComputable) {
                            const percentage = Math.round((r.loaded / r.total) * 100);
                            document.getElementById("progressBar").style.width = percentage + "%";
                            document.getElementById("progressValue").innerHTML = percentage + "%";
                        }
                    };
                    xhr.onreadystatechange = async function () {
                        if (xhr.readyState == 4) {
                            document.getElementById("progressBar").style.width = "100%";
                            document.getElementById("progressBar").innerHTML = "100%";
                            hideElement("progressColumn");
                            await sleep(270);
                            if (xhr.status == 200) {
                                showElement("successColumn");
                                setSuccessMessage("Update Successful");
                                await waitForServerRebootShowResult();
                            } else if (xhr.status == 400) {
                                showElement("errorColumn");
                                setErrorTitle("Upload failed");
                                setErrorReason(xhr.responseText);
                            } else {
                                showElement("errorColumn");
                                setErrorTitle("Upload failed");
                                setErrorReason("Server returned status code " + xhr.status);
                            }
                        }
                    };

                    const formData = new FormData();
                    formData.append("file", file, file.name);
                    xhr.open("POST", "/prettyota/upload");
                    xhr.send(formData);
                    setProgressTitle("Uploading " + file.name);
                } catch (e) {
                    hideElement("progressColumn");
                    await sleep(270);
                    showElement("errorColumn");
                    setErrorTitle("Upload failed");
                    setErrorReason(e.message);
                }
            }

            // Handle <input> event
            function onFileInput(files) {
                hideCustomAlert();
                if (files.length > 1) {
                    showCustomAlert("Only a single file can be uploaded at once.");
                    return false;
                }
                if (files[0].name.split(".").pop() != "bin") {
                    showCustomAlert("Only \".bin\" files can be uploaded.");
                    return false;
                }

                runUpdate(files[0]);
                return true;
            }

            // Button events
            document.getElementById("rollbackButton").addEventListener("click", async function (e) {
                hideCustomAlert();
                hideElement("uploadColumn");
                hideElement("settingsColumn");
                hideElement("boardColumn");
                hideElement("buttonColumn");
                let xhr = new XMLHttpRequest();
                xhr.onreadystatechange = async function () {
                    if (xhr.readyState == 4) {
                        if (xhr.status == 200) {
                            showElement("successColumn");
                            setSuccessMessage("Rollback Successful");
                            await waitForServerRebootShowResult(true);
                        } else if (xhr.status == 400) {
                            showElement("errorColumn");
                            setErrorTitle("Rollback failed");
                            setErrorReason(xhr.responseText);
                        } else {
                            showElement("errorColumn");
                            setErrorTitle("Rollback failed");
                            setErrorReason("Server returned status code " + xhr.status);
                        }
                    }
                };
                xhr.open("POST", "/prettyota/doRollback");
                xhr.send();
            });
            document.getElementById("rebootButton").addEventListener("click", async function (e) {
                hideCustomAlert();
                hideElement("uploadColumn");
                hideElement("settingsColumn");
                hideElement("boardColumn");
                hideElement("buttonColumn");
                await sleep(270);
                hideElement("successColumnSVG");
                setSuccessMessage("Rebooting");
                showElement("successColumn");
                let xhr = new XMLHttpRequest();
                xhr.onreadystatechange = async function () {
                    if (xhr.readyState == 4) {
                        if (xhr.status == 200) {
                            await waitForServerRebootShowResult(true);
                        } else {
                            hideElement("successColumnLoaderReboot");
                            document.getElementById("successColumnRebootMessage").innerHTML = "Sending reboot request failed. Server returned status code: " + xhr.status;
                            document.getElementById("goBackButton").disabled = false;
                            document.getElementById("goBackButton2").disabled = false;
                        }
                    }
                };
                xhr.open("POST", "/prettyota/doManualReboot");
                xhr.send();
            });
            document.getElementById("logoutButton").addEventListener("click", async function (e) {
                let xhr = new XMLHttpRequest();
                xhr.onreadystatechange = async function () {
                    if (xhr.readyState == 4) {
                        if (xhr.status == 200) {
                            resetView();
                        } else {
                            hideCustomAlert();
                            showCustomAlert("Log out failed");
                        }
                    }
                };
                xhr.open("POST", "/prettyota/logout");
                xhr.send();
            });

            // Checkbox event
            document.getElementById("rebootCheckboxInput").addEventListener("click", function (e) {
                localStorage.setItem("reboot_checkbox", document.getElementById("rebootCheckboxInput").checked);
            });

            // Drop area events
            let dropArea = document.getElementById("dropzone");
            dropArea.addEventListener("dragover", function (e) {
                e.preventDefault();
            });
            dropArea.addEventListener("drop", function (e) {
                e.preventDefault();
                const files = e.dataTransfer.files;
                onFileInput(files);
            });
            dropArea.addEventListener("dragenter", dropHighlight);
            dropArea.addEventListener("dragover", dropHighlight);
            dropArea.addEventListener("dragleave", dropUnhighlight);
            dropArea.addEventListener("drop", dropUnhighlight);
            dropArea.addEventListener("click", function (e) {
                document.getElementById("fileInput").click();
            });
            function dropHighlight(e) {
                dropArea.classList.add("dropzone-highlight");
            }
            function dropUnhighlight(e) {
                dropArea.classList.remove("dropzone-highlight");
            }

            // UI helper functions
            function showElement(elementID) {
                document.getElementById(elementID).classList.remove("hidden");
            }
            function hideElement(elementID) {
                document.getElementById(elementID).classList.add("hidden");
            }
            function setProgressTitle(str) {
                document.getElementById("progressTitle").innerHTML = str;
            }
            function setSuccessMessage(str) {
                document.getElementById("successMessage").innerHTML = str;
            }
            function setErrorTitle(str) {
                document.getElementById("errorTitle").innerHTML = str;
            }
            function setErrorReason(str) {
                document.getElementById("errorReason").innerHTML = str;
            }

            // Notification bar functions
            let showTimeout;
            function showCustomAlert(msg, asSuccess = false) {
                document.getElementById("notificationMessage").innerText = msg;

                if(asSuccess)
                    document.getElementById("notificationBar").classList.add("notificationBarSuccess");
                else
                    document.getElementById("notificationBar").classList.remove("notificationBarSuccess");

                document.getElementById("notificationBar").classList.add("show");
                clearTimeout(showTimeout);
                showTimeout = setTimeout(function() {
                    document.getElementById("notificationBar").classList.remove("show");
                }, 7000);
            }
            function hideCustomAlert() {
                clearTimeout(showTimeout);
                document.getElementById("notificationBar").classList.remove("show");
            }

            // Query info about PrettyOTA (version, URLs)
            async function queryPrettyOTAInfo() {
                let xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function () {
                    if (xhr.readyState == 4 && xhr.status == 200) {
                        let jsonObj = JSON.parse(this.responseText);
                        document.getElementById("versionString").innerText = jsonObj.prettyotaVersion;
                        localStorage.setItem("version_string", jsonObj.prettyotaVersion);
                        localStorage.setItem("main_url", jsonObj.mainURL);
                        localStorage.setItem("login_url", jsonObj.loginURL);

                        if(jsonObj.authenticationEnabled)
                            showElement("logoutButton");
                        else
                            hideElement("logoutButton");
                    }
                };

                xhr.open("GET", "/prettyota/queryPrettyOTAInfo");
                xhr.send();
            }
            async function queryInfo() {
                let xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function () {
                    if (xhr.readyState == 4) {
                        if (xhr.status == 200) {
                            let jsonObj = JSON.parse(this.responseText);

                            document.getElementById("firmware_version_text").innerText = jsonObj.firmwareVersion;
                            document.getElementById("build_date_text").innerText = jsonObj.buildDate;
                            document.getElementById("build_time_text").innerText = jsonObj.buildTime;

                            if (jsonObj.rollbackPossible) {
                                document.getElementById("rollbackButton").disabled = false;
                                document.getElementById("rollback_text").style = "color:#00ff00;";
                                document.getElementById("rollback_text").innerText = "Yes";
                            } else {
                                document.getElementById("rollbackButton").disabled = true;
                                document.getElementById("rollback_text").style = "color:#ff5f5f;";
                                document.getElementById("rollback_text").innerText = "No";
                            }
                        } else if (xhr.status == 400) {
                            console.log("queryInfo: Server returned " + xhr.responseText);
                        } else {
                            console.log("queryInfo: Server returned status code " + xhr.status);
                        }
                    }
                };

                xhr.open("GET", "/prettyota/queryInfo");
                xhr.send();
            }

            // Wait for server reboot functions
            async function waitForServerReboot() {
                const interval = 1500;
                const attempts = 10;
                let count = 1;
                let success = false;
                await sleep(3100);
                while (count < attempts) {
                    await sleep(interval);
                    try {
                        const xhttp = new XMLHttpRequest();
                        xhttp.onloadend = function() {
                            count = attempts;
                            success = true;
                        }
                        xhttp.onerror = function() {
                            count++;
                        }
                        xhttp.open("GET", "/prettyota/rebootCheck");
                        xhttp.send();
                    }
                    catch {
                        count++;
                    }
                }
                return success;
            }
            async function waitForServerRebootShowResult(force = false) {
                const reboot = document.getElementById("rebootCheckboxInput").checked;
                if(!reboot && !force) {
                    document.getElementById("successColumnRebootMessage").innerHTML = "Auto reboot is disabled. Please reboot manually to use the new firmware.";
                    hideElement("successColumnLoaderReboot");
                    return;
                }
                document.getElementById("goBackButton").disabled = true;
                document.getElementById("goBackButton2").disabled = true;
                const isRebooted = await waitForServerReboot();
                document.getElementById("goBackButton").disabled = false;
                document.getElementById("goBackButton2").disabled = false;
                if(isRebooted) {
                    document.getElementById("successColumnRebootMessage").innerHTML = "Reboot has finished, server is running.";
                    hideElement("successColumnLoaderReboot");
                } else {
                    document.getElementById("successColumnRebootMessage").innerHTML = "Could not reconnect. Reboot could have failed or the new firmware does not behave correctly.";
                    hideElement("successColumnLoaderReboot");
                }
            }

            // Reload page
            function resetView() {
                window.location.reload();
            }

            // On page load
            function onLoad() {
                if (!("reboot_checkbox" in localStorage))
                    localStorage.setItem("reboot_checkbox", true);

                if (!("version_string" in localStorage))
                    localStorage.setItem("version_string", "1.0.0");
                if (!("main_url" in localStorage))
                    localStorage.setItem("main_url", "/update");
                if (!("login_url" in localStorage))
                    localStorage.setItem("login_url", "/login");

                document.getElementById("rebootCheckboxInput").checked = localStorage.getItem("reboot_checkbox") == "true";
                document.getElementById("versionString").innerText = localStorage.getItem("version_string");

                queryPrettyOTAInfo();
                queryInfo();
            }

            // Publish functions
            window.onFileInput = onFileInput;
            window.resetView = resetView;
            window.onload = onLoad;
        </script>
        <style>
            html {
                font-family: sans-serif;
            }
            body {
                background-color: #191919;
                color: #e6e6e6;
            }
            .footer {
                position: fixed;
                left: 0;
                bottom: 0;
                width: 100%;
                height: 28px;
                line-height: 3px;
                background-color: #313131;
                color: #898989;
                font-size: 13px;
                box-shadow: 0px -0px 8px #000000;
            }
            .mainDiv {
                display: flex;
                margin-top: 3rem;
                margin-bottom: 4rem;
                flex-direction: column;
                align-items: center;
            }
            .headerRow {
                border-bottom: 1px solid #e6e6e61c;
                margin-left: 15px;
                margin-right: 15px;
            }
            .loaderBoxStack {
                scale: 2.25;
                height: 50px;
                width: 40px;
                margin-bottom: 55px;
                margin-top: 47px;
            }
            .box {
                position: relative;
                opacity: 0;
                left: 10px;
            }
            .side-left {
                position: absolute;
                background-color: hsl(173, 60%, 22%);
                width: 19px;
                height: 5px;
                transform: skew(0deg, -25deg);
                top: 14px;
                left: 10px;
            }
            .side-right {
                position: absolute;
                background-color: hsl(173, 60%, 43%);
                width: 19px;
                height: 5px;
                transform: skew(0deg, 25deg);
                top: 14px;
                left: -9px;
            }
            .side-top {
                position: absolute;
                background-color: hsl(173, 60%, 35%);
                width: 20px;
                height: 20px;
                rotate: 45deg;
                transform: skew(-20deg, -20deg);
            }
            .box-1 {
                animation: from-left 4s infinite;
            }
            .box-2 {
                animation: from-right 4s infinite;
                animation-delay: 1s;
            }
            .box-3 {
                animation: from-left 4s infinite;
                animation-delay: 2s;
            }
            .box-4 {
                animation: from-right 4s infinite;
                animation-delay: 3s;
            }
            @keyframes from-left {
                0% {
                    z-index: 20;
                    opacity: 0;
                    translate: -20px -6px;
                }
                20% {
                    z-index: 10;
                    opacity: 1;
                    translate: 0px 0px;
                }
                40% {
                    z-index: 9;
                    translate: 0px 4px;
                }
                60% {
                    z-index: 8;
                    translate: 0px 8px;
                }
                80% {
                    z-index: 7;
                    opacity: 1;
                    translate: 0px 12px;
                }
                100% {
                    z-index: 5;
                    translate: 0px 30px;
                    opacity: 0;
                }
            }
            @keyframes from-right {
                0% {
                    z-index: 20;
                    opacity: 0;
                    translate: 20px -6px;
                }
                20% {
                    z-index: 10;
                    opacity: 1;
                    translate: 0px 0px;
                }
                40% {
                    z-index: 9;
                    translate: 0px 4px;
                }
                60% {
                    z-index: 8;
                    translate: 0px 8px;
                }
                80% {
                    z-index: 7;
                    opacity: 1;
                    translate: 0px 12px;
                }
                100% {
                    z-index: 5;
                    translate: 0px 30px;
                    opacity: 0;
                }
            }
            .loaderRebootSVG {
                width: 23px;
                transform-origin: center;
                animation: rotate4 2s linear infinite;
                margin-top: -1px;
            }
            .loaderRebootCircle {
                fill: none;
                stroke: #25b09b;
                stroke-width: 7;
                stroke-dasharray: 1, 200;
                stroke-dashoffset: 0;
                stroke-linecap: round;
                animation: dash4 1.5s ease-in-out infinite;
            }
            @keyframes rotate4 {
                100% {
                    transform: rotate(360deg);
                }
            }
            @keyframes dash4 {
                0% {
                    stroke-dasharray: 1, 200;
                    stroke-dashoffset: 0;
                }
                50% {
                    stroke-dasharray: 90, 200;
                    stroke-dashoffset: -35px;
                }
                100% {
                    stroke-dashoffset: -125px;
                }
            }
            .uploadColumn {
                margin-top: 40px;
                margin-bottom: 25px;
                opacity: 1;
                transition: opacity 0.25s ease-in, display 0.25s ease-in allow-discrete;
            }
            .dropzone {
                width: 340px;
                height: 140px;
                border: 1px dashed #e6e6e633;
                border-radius: 10px;
                font-size: 0.875rem;
                line-height: 1.25rem;
                text-align: center;
                transition: border-color 270ms ease-out;
                cursor: pointer;
            }
            .dropzone:hover {
                border-color: #e6e6e6b8;
            }
            .dropzone-highlight {
                border-color: #30b4a6;
            }
            .dropzoneText {
                margin: 40px;
            }
            .dropzoneTextDim {
                color: #7e7e7e;
            }
            .columnHeader {
                display: flex;
                flex-direction: row;
                justify-content: center;
                align-items: center;
                font-size: 12px;
                line-height: 16px;
                text-transform: uppercase;
                user-select: none;
                margin-top: 1px;
            }
            .columnHeaderText {
                margin-top: 15px;
                margin-bottom: 7px;
                color: #b0b0b0;
            }
            .columnHeaderSVG {
                position: relative;
                color: #25b09b;
                margin-top: 6px;
            }
            .columnHeaderSVGMCU {
                margin-right: 12px;
            }
            .columnHeaderSVGGear {
                margin-right: 8px;
            }
            .column {
                width: 340px;
                border: 1px solid #e6e6e633;
                border-radius: 10px;
                margin-top: 25px;
                opacity: 1;
                transition: opacity 0.25s ease-in, display 0.25s ease-in allow-discrete;
            }
            .columnContent {
                display: flex;
                flex-direction: column;
                line-height: 0.6;
                margin-top: 15px;
                margin-left: 15px;
                margin-bottom: 8px;
                width: 305px;
            }
            .columnContentEntry {
                display: flex;
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
            .columnContentValue {
                color: #b0b0b0;
            }
            select {
                color: #e6e6e6;
                background: #242424;
                padding: 4px 12px;
                border: 1px solid #383838;
                border-radius: 6px;
                font-size: 14px;
                line-height: 20px;
                appearance: none;
            }
            select:hover {
                border-color: #006bff;
            }
            .rebootCheckboxInput {
                display: none;
            }
            .toggleSwitch {
                display: flex;
                align-items: center;
                justify-content: center;
                position: relative;
                width: 39px;
                height: 21px;
                background-color: #394158;
                border-radius: 25px;
                cursor: pointer;
                transition-duration: 0.15s;
            }
            .toggleSwitch::after {
                content: "";
                position: absolute;
                height: 6px;
                width: 6px;
                left: 3px;
                background-color: #e6e6e6;
                border-radius: 50%;
                transition-duration: 0.2s;
                box-shadow: 5px 2px 7px #08080842;
                border: 5px solid #e6e6e6;
            }
            .rebootCheckboxInput:checked + .toggleSwitch::after {
                transform: translateX(17px);
                transition-duration: 0.15s;
                background-color: #e6e6e6;
            }
            .rebootCheckboxInput:checked + .toggleSwitch {
                background-color: #006bff;
                transition-duration: 0.15s;
            }
            .statusColumn {
                display: flex;
                margin-top: 30px;
                flex-direction: column;
                align-items: center;
            }
            .buttonColumn {
                display: inline-flex;
                margin-top: 30px;
                flex-direction: row;
                align-items: center;
                gap: 15px;
            }
            .statusTitleText {
                margin-top: 15px;
                margin-bottom: 5px;
            }
            .detailText {
                font-size: 14px;
                color: #b0b0b0;
                margin-top: 5px;
                margin-bottom: 5px;
            }
            .waitForRebootDetailText {
                font-size: 14px;
                color: #b0b0b0;
                margin-top: 5px;
                margin-bottom: 5px;
                padding-left: 10px;
            }
            .successColumnWaitForReboot {
                display: flex;
                margin-top: 15px;
            }
            .waitForReboot {
                display: flex;
                margin-top: 18px;
            }
            .goBackButton {
                display: flex;
                background: #2d5fec;
                color: #e4e6eb;
                cursor: pointer;
                width: 140px;
                height: 45px;
                padding-left: 15px;
                font-weight: bold;
                font-size: 14px;
                border: 0;
                border-radius: 13px;
                align-items: center;
                box-shadow: 0 5px 15px #00000092;
                transition: all 0.25s ease;
                margin-top: 30px;
            }
            .goBackButton:hover {
                background-color: #4d82ff;
            }
            .goBackButton > svg {
                width: 35px;
                transition: transform 0.25s normal;
                scale: 1.3;
            }
            .goBackButton:hover svg {
                transform: translateX(-3px);
            }
            .goBackButton:active {
                transform: scale(0.96);
                background-color: #0045e6;
            }
            .goBackButton:disabled {
                background-color: #383838;
                color: #9a9a9a;
                box-shadow: none;
                pointer-events: none;
            }
            .rollbackButton {
                display: flex;
                background: #2d5fec;
                color: #e4e6eb;
                cursor: pointer;
                width: 150px;
                height: 45px;
                font-weight: bold;
                font-size: 14px;
                border: 0;
                border-radius: 13px;
                align-items: center;
                box-shadow: 0 5px 15px #00000092;
                transition: all 0.25s ease;
                opacity: 1;
            }
            .rollbackButton:hover {
                background-color: #4d82ff;
            }
            .rollbackButton > svg {
                position: absolute;
                width: 42px;
                transition: transform 0.5s normal;
                scale: 1.2;
            }
            .rollbackButton:hover #svg_rotate {
                transform: rotate(-180deg);
            }
            .rollbackButton:active {
                transform: scale(0.96);
                background-color: #0045e6;
            }
            .rollbackButton:disabled {
                background-color: #383838;
                color: #9a9a9a;
                box-shadow: none;
                pointer-events: none;
            }
            .rollbackButtonText {
                margin-left: 30px;
            }
            .rebootButton {
                display: flex;
                background: #2d5fec;
                color: #e4e6eb;
                cursor: pointer;
                width: 150px;
                height: 45px;
                font-weight: bold;
                font-size: 14px;
                border: 0;
                border-radius: 13px;
                align-items: center;
                box-shadow: 0 5px 15px #00000092;
                transition: all 0.25s ease;
                opacity: 1;
            }
            .rebootButton:hover {
                background-color: #4d82ff;
            }
            .rebootButton > svg {
                position: absolute;
                width: 43px;
                scale: 1.14;
            }
            .rebootButton:active {
                transform: scale(0.96);
                background-color: #0045e6;
            }
            .rebootButton:disabled {
                background-color: #383838;
                color: #9a9a9a;
                box-shadow: none;
                pointer-events: none;
            }
            .rebootButtonText {
                margin-left: 53px;
            }
            .logoutButton {
                position: relative;
                float: right;
                padding-right: 25px;
                bottom: 26px;
                height: 23px;
                background-color: transparent;
                color: #ececec;
                border: none;
                cursor: pointer;
            }
            .logoutButton:hover {
                color: #75ffea;
            }
            .logoutButton:active {
                color: #5cc6b6;
            }
            #logoutSVG {
                position: relative;
                top: -2px;
                left: -4px;
            }
            #logoutText {
                position: relative;
                top: -9px;
            }
            .progressBarContainer {
                display: inline-flex;
                flex-direction: row;
                gap: 15px;
                align-items: center;
            }
            .progress {
                background: #242526;
                border-radius: 10px;
                padding: 0px;
                height: 10px;
                width: 270px;
            }
            .progress-value {
                transition : width 0.85s normal;
                border-radius: 10px;
                background: #2563eb;
                height: 10px;
                width: 0px;
            }
            .progressValueText {
                font-size: 14px;
                color: #b0b0b0;
                margin-top: 5px;
                margin-bottom: 5px;
                width: 25px;
            }
            .notificationBar {
                visibility: hidden;
                position: fixed;
                top: 0px;
                height: 38px;
                line-height: 38px;
                width: 80%;
                background: #cc3445;
                text-align: center;
                color: #ffffff;
                font-size: 14px;
                font-weight: lighter;
                opacity: 0;
                transition: opacity 250ms ease-in, visibility 0ms ease-in 250ms;
                border-radius: 7px;
            }
            .notificationBar.show {
                visibility: visible;
                opacity: 1;
            }
            .notificationBarSuccess {
                background: #21c322;
            }
            .hidden {
                display: none;
                opacity: 0;
            }
        </style>
    </head>
    <body>
        <div class="mainDiv">
            <!-- Logo -->
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="340px" height="69px" viewBox="0 0 27190 5630">
                <path d="M6340 773a194 194 0 00-40 320c62 57 60 57 755 57 700 0 706 0 830 60a590 590 0 01 4 1053c-135 66-140 67-857 67-904 0-801-113-802 886v730l23 45a194 194 0 00 320 40c57-63 57-65 57-709V2730h503c703 0 812-18 1038-170a990 990 0 00-167-1733c-174-74-143-71-920-75l-700-3-44 24m7240 10c-30 16-51 37-67 67l-24 44 4 1200c3 1340-3 1224 72 1421 193 513 927 848 930 424 0-118-36-163-165-204a648 648 0 01-413-419c-20-59-21-84-25-719l-3-657h235a1880 1880 0 00 263-10c127-49 142-230 26-310-36-25-40-25-280-28l-243-3v-342c0-373-3-390-61-444-55-50-174-60-250-20m1490-3c-20 10-48 34-60 52l-24 33-3 1175c-4 1366-6 1333 108 1560 240 478 890 727 890 340 0-112-40-164-156-204a631 631 0 01-430-456c-17-60-19-119-19-700v-635l245-5c305-6 360-31 360-167 0-152-63-182-377-183H15370l-3-364c-3-410 0-396-84-443-52-30-162-31-216-3m-3560 756c-1460 227-1404 2434 65 2605 588 68 1356-430 1104-717-94-108-205-95-336 40a871 871 0 01-1495-422l-8-32H11840c1215 0 1140 14 1139-216 0-766-715-1376-1473-1258m-1601 30c-480 131-830 523-932 1039-21 106-33 1239-14 1330 40 190 290 225 371 50 17-37 19-77 19-600 0-712 6-762 100-961a864 864 0 01 600-485c123-33 180-96 180-200 0-163-123-228-324-173m6520 10a242 242 0 00-126 110c-41 84-50 60 440 1179l450 1030-162 380c-216 507-210 646 31 645 122 0 143-33 340-497a13328 13328 0 01 206-473c4-14 208-498 453-1075 258-610 447-1068 450-1092 20-176-228-283-345-150-18 20-156 336-392 895-341 807-365 860-377 835-158-368-732-1670-750-1700-40-69-140-108-219-86m-4890 360c-334 71-695 442-695 714 0 5 326 9 865 9h865l-7-33c-87-459-576-787-1028-690" fill="#2cb4a4" fill-rule="evenodd"/>
                <path d="M2330 599a154420 154420 0 01-773 446 32852 32852 0 01-497 287l-380 220c-170 98-176 108-98 155l554 320 60 33 205-123c170-102 326-194 410-242a161187 161187 0 00 554-320c138-76 778-445 784-451 13-12-616-388-668-400a720 720 0 00-151 75m17974 117C18947 900 18380 2630 19344 3637c872 911 2374 555 2780-660 402-1202-586-2430-1820-2261m1995 57a193 193 0 00-56 304c68 78-9 73 1118 73h1006l44-23a200 200 0 00-2-357c-37-20-66-20-1052-20h-1014l-44 23m3296-9a250 250 0 00-108 108 264260 264260 0 00-1220 2988 205 205 0 00 114 220c62 32 1550 30 1617-1 110-54 140-206 60-304-64-77-40-75-697-75-520 0-583-2-577-15 14-39 938-2290 940-2292 1-2 233 559 516 1245 641 1558 571 1405 655 1443 142 65 310-50 292-200-7-60-1210-3004-1246-3051-57-74-246-110-346-66m-22450 288c-127 75-150 88-620 358a590130 590130 0 00-1030 595C1228 2160 1260 2090 1260 2517v362l58 32 130 76c115 70 107 94 108-317l2-355 98-59 141-82a40360 40360 0 00 445-255 726790 726790 0 00 1242-717c94-54 98-48-81-151-146-85-113-85-258 0m17240 60c-1055 143-1498 1463-753 2244 798 836 2172 247 2172-930 0-792-674-1416-1419-1314M3450 1347l-485 280a478065 478065 0 00-1117 644c-153 85-153 81-17 158l289 166c405 234 334 218 510 116 74-43 153-89 175-100A113105 113105 0 01 3846 2010c580-332 596-343 563-375-8-7-90-57-184-110-440-252-500-287-510-296-20-20-57-3-265 118m19836 208c-20 7-51 26-67 40-63 60-60-2-57 1245l3 1135 23 33c92 128 277 120 349-17l23-44V2826c0-1257 5-1164-73-1233-58-50-128-64-200-38M474 1743c-3 6-4 516-3 1131l3 1120 180 104a27377 27377 0 00 300 172c5 5 102 60 215 125a116150 116150 0 01 1070 617c150 87 173 98 193 87 22-13 27-2223 4-2250-6-10-106-70-222-136a26643 26643 0 01-468-270c-92-56-87-75-87 385 0 217 0 396-3 398-5 5-500-277-510-290-3-6-7-198-7-427v-417l-88-50-122-70c-20-10-102-58-183-106-256-149-262-151-272-123m3840 59-165 96a40221 40221 0 00-522 300 112703 112703 0 00-688 400 6501 6501 0 00-432 255c-18 29-10 2235 9 2245 22 13 36 7 173-73a51094 51094 0 01 630-365 250144 250144 0 01 1090-628c25-13 50-30 58-35 24-20 12-2261-13-2264-11-1-74 30-140 69" fill="#ededed" fill-rule="evenodd"/>
            </svg>

            <!-- Upload column -->
            <div id="uploadColumn" class="uploadColumn">
                <!-- Drop zone -->
                <form>
                    <div id="dropzone" class="dropzone">
                        <p class="dropzoneText">Drag and drop here<br /><span class="dropzoneTextDim">or<br />click to select (.bin) file</span></p>
                        <input type="file" id="fileInput" class="hidden" accept=".bin, .bin.gz" onchange="onFileInput(files)" />
                    </div>
                </form>
            </div>

            <!-- Progress column -->
            <div id="progressColumn" class="statusColumn hidden">
                <!--<div class="loaderProgress"></div>-->
                <div class="loaderBoxStack">
                    <div class="box box-1">
                        <div class="side-left"></div>
                        <div class="side-right"></div>
                        <div class="side-top"></div>
                    </div>
                    <div class="box box-2">
                        <div class="side-left"></div>
                        <div class="side-right"></div>
                        <div class="side-top"></div>
                    </div>
                    <div class="box box-3">
                        <div class="side-left"></div>
                        <div class="side-right"></div>
                        <div class="side-top"></div>
                    </div>
                    <div class="box box-4">
                        <div class="side-left"></div>
                        <div class="side-right"></div>
                        <div class="side-top"></div>
                    </div>
                </div>
                <p id="progressTitle" class="detailText"></p>
                <div class="progressBarContainer">
                    <div class="progress">
                        <div id="progressBar" class="progress-value" style="width: 0%"></div>
                    </div>
                    <p id="progressValue" class="progressValueText">0%</p>
                </div>
            </div>

            <!-- Success column -->
            <div id="successColumn" class="statusColumn hidden">
                <svg id="successColumnSVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 538 537" width="60px" height="60px" version="1.1">
                    <path fill="#0fc93b" stroke="none" fill-rule="evenodd" d="M 233.085 2.036 C -14.768 35.915, -85.223 363.031, 126.652 496.197 C 295.933 602.593, 525.799 486.284, 536.708 288.715 C 537.035 282.784, 537.685 277.695, 538.152 277.406 C 539.372 276.652, 539.226 258, 538 258 C 537.434 258, 536.992 255.071, 536.982 251.250 C 536.945 237.633, 532.042 209.988, 526.311 191.084 C 488.066 64.926, 362.980 -15.719, 233.085 2.036 M 252 53.661 C 70.486 71.365, -11.158 285.417, 113.467 416.864 C 238.518 548.760, 462.949 472.177, 482.930 290.789 C 497.452 158.962, 382.507 40.933, 252 53.661 M 300.500 230.599 C 261.450 269.850, 229.053 301.972, 228.506 301.982 C 227.959 301.992, 213.446 287.940, 196.255 270.755 L 164.997 239.509 146.251 258.256 L 127.505 277.002 178.004 327.501 L 228.503 378.001 319.496 287.004 L 410.488 196.008 392.004 177.504 C 381.838 167.327, 373.066 159.053, 372.510 159.118 C 371.955 159.182, 339.550 191.349, 300.500 230.599 M 0.365 268.500 C 0.368 274, 0.536 276.122, 0.738 273.216 C 0.941 270.311, 0.939 265.811, 0.734 263.216 C 0.528 260.622, 0.363 263, 0.365 268.500" />
                </svg>
                <p id="successMessage" class="statusTitleText">Update Successful</p>
                <div class="successColumnWaitForReboot">
                    <svg id="successColumnLoaderReboot" class="loaderRebootSVG" viewBox="25 25 50 50"><circle class="loaderRebootCircle" r="20" cy="50" cx="50"></circle></svg>
                    <p id="successColumnRebootMessage" class="waitForRebootDetailText">Rebooting device...</p>
                </div>
                <button disabled id="goBackButton" onclick="resetView()" type="button" class="goBackButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14px" height="14px" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m12 19-7-7 7-7" />
                        <path d="M19 12H5" />
                    </svg>
                    Go Back
                </button>
            </div>

            <!-- Error column -->
            <div id="errorColumn" class="statusColumn hidden">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 538 537" width="60px" height="60px" version="1.1">
                    <path fill="#ff2222" stroke="none" fill-rule="evenodd" d="M 245 0.663 C 19.260 22.766, -80.448 293.706, 77.480 455.869 C 234.007 616.593, 513.757 521.166, 535.888 299.500 C 536.437 294, 537.413 284.240, 538.056 277.811 C 538.920 269.171, 538.940 263.955, 538.130 257.811 C 537.528 253.240, 536.535 244.325, 535.924 238 C 522.229 96.258, 387.900 -13.329, 245 0.663 M 249.457 53.984 C 79.723 71.944, -4.448 265.960, 99.342 400 C 216.194 550.907, 457.573 484.562, 482.454 294.699 C 500.044 160.463, 383.273 39.824, 249.457 53.984 M 177.662 176.838 L 158.839 195.680 195.170 231.830 L 231.500 267.980 195.202 304.293 L 158.904 340.606 175.323 357.053 C 184.354 366.099, 192.942 374.606, 194.407 375.958 L 197.073 378.417 233 342.500 L 268.927 306.583 271.563 309.042 C 273.012 310.394, 289.273 326.462, 307.697 344.750 C 326.122 363.038, 341.494 378, 341.858 378 C 342.222 378, 350.837 369.674, 361.002 359.497 L 379.485 340.995 343.244 304.744 L 307.003 268.493 343.246 232.251 L 379.488 196.008 360.502 177.002 L 341.515 157.995 305.257 194.242 L 269 230.490 232.743 194.242 L 196.485 157.995 177.662 176.838 M 0.320 268 C 0.320 271.575, 0.502 273.038, 0.723 271.250 C 0.945 269.462, 0.945 266.538, 0.723 264.750 C 0.502 262.962, 0.320 264.425, 0.320 268" />
                </svg>
                <p id="errorTitle" class="statusTitleText">Update failed</p>
                <p id="errorReason" class="detailText">Please try again</p>
                <button id="goBackButton2" onclick="resetView()" type="button" class="goBackButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m12 19-7-7 7-7" />
                        <path d="M19 12H5" />
                    </svg>
                    Go Back
                </button>
            </div>

            <!-- Board info column -->
            <div id="boardColumn" class="column">
                <div class="columnHeader">
                    <svg class="columnHeaderSVG columnHeaderSVGMCU" xmlns="http://www.w3.org/2000/svg" fill="currentcolor" version="1.1" width="21px" height="21px" viewBox="0 0 9420 9420"><path d="M5791 8940a480 480 0 00 960 0v-775h-959V8940h-1zm0-8460v775H6750V480a480 480 0 00-959 0zM4230 480v775h960V480a480 480 0 00-960 0zm0 8460a480 480 0 00 960 0v-775h-960V8940zM2670 480v775h959V480a480 480 0 00-959 0zm0 8460a480 480 0 00 960 0v-775h-960V8940zM0 6270a480 480 0 00 480 480h775v-959H480A480 480 0 00 0 6270zm8940-479h-775V6750H8940a480 480 0 00 0-959zM0 4710a480 480 0 00 480 480h775v-960H480a480 480 0 00-480 480zm8940-480h-775v960H8940a480 480 0 00 0-960zM0 3150a480 480 0 00 480 480h775v-960H480a480 480 0 00-480 480zm8940-480h-775v959H8940a480 480 0 00 0-959zM1716 7204a500 500 0 00 500 500h4988a500 500 0 00 500-500V2216a500 500 0 00-500-500H2216a500 500 0 00-500 500v4988"/></svg>
                    <p class="columnHeaderText">Board info</p>
                </div>
                <div class="headerRow"></div>
                <div class="columnContent">
                    <div class="columnContentEntry">
                        <p>Firmware version</p>
                        <span id="firmware_version_text" class="columnContentValue"></span>
                    </div>
                    <div class="columnContentEntry">
                        <p>Build date</p>
                        <span id="build_date_text" class="columnContentValue"></span>
                    </div>
                    <div class="columnContentEntry">
                        <p>Build time</p>
                        <span id="build_time_text" class="columnContentValue"></span>
                    </div>
                    <div class="columnContentEntry">
                        <p>Rollback possible</p>
                        <span id="rollback_text" class="columnContentValue"></span>
                    </div>
                </div>
            </div>

            <!-- Settings column -->
            <div id="settingsColumn" class="column">
                <div class="columnHeader">
                    <svg class="columnHeaderSVG columnHeaderSVGGear" xmlns="http://www.w3.org/2000/svg" fill="currentcolor" width="21px" height="21px" viewBox="0 0 2400 2400"><path d="M2089 978h-65a116 116 0 01-100-74V900a113 113 0 01 22-126l46-46a113 113 0 00 0-158L1830 414a113 113 0 00-160 0l-45 46a113 113 0 01-125 22 116 116 0 01-74-100V310A111 111 0 00 1311 200h-222a111 111 0 00-111 110v65a116 116 0 01-74 100H900a113 113 0 01-125-16l-46-46a113 113 0 00-158 0L414 571a113 113 0 00 0 158l46 46A113 113 0 01 482 900a116 116 0 01-100 74h-70a111 111 0 00-110 115v222a111 111 0 00 110 111h64a116 116 0 01 100 74 113 113 0 01-22 126l-46 46a113 113 0 00 0 158l157 157a113 113 0 00 158 0l46-46a113 113 0 01 130-20 116 116 0 01 75 100v66A111 111 0 00 1089 2200h222a111 111 0 00 111-111v-65a116 116 0 01 74-100 113 113 0 01 126 22l46 46a113 113 0 00 158 0l157-157a113 113 0 00 0-158l-46-46a113 113 0 01-20-130 116 116 0 01 100-72h66A111 111 0 00 2200 1311v-222a111 111 0 00-110-111ZM1200 1600a400 400 0 11 400-400 400 400 0 01-400 400Z"/></svg>
                    <p class="columnHeaderText">Settings</p>
                </div>
                <div class="headerRow"></div>
                <div class="columnContent">
                    <div class="columnContentEntry">
                        <p>OTA Mode</p>
                        <select id="otaMode">
                            <option value="fr" selected>Firmware</option>
                            <option value="fs">File system</option>
                        </select>
                    </div>
                    <div class="columnContentEntry">
                        <p>Reboot after update</p>
                        <input type="checkbox" id="rebootCheckboxInput" class="rebootCheckboxInput" checked />
                        <label for="rebootCheckboxInput" class="toggleSwitch"></label>
                    </div>
                </div>
            </div>

            <!-- Button column -->
            <div id="buttonColumn" class="buttonColumn">
                <!-- Rollback button -->
                <button disabled id="rollbackButton" name="rollbackButton" type="button" class="rollbackButton">
                    <svg width="20px" height="20px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="white" stroke="white">
                        <path d="M513 203.1c-19.3 0-35 15.7-35 35v294.2c0 12.5 6.7 24 17.5 30.3L651 652.7c5.5 3.2 11.6 4.7 17.5 4.7 12.1 0 23.8-6.3 30.3-17.5 9.7-16.7 4-38.1-12.8-47.8l-138.1-80v-274c0.1-19.3-15.6-35-34.9-35z" />
                    </svg>
                    <svg id="svg_rotate" width="20px" height="20px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="white" stroke="white">
                        <path d="M966.2 428.3c-11.3-61.3-34.3-118.6-68.3-170.2-32.9-49.9-74.6-92.4-123.9-126.4-49.4-34-104-57.8-162.3-70.7-60.4-13.4-122.1-14.4-183.4-3.1-96.9 17.8-183.8 65.1-250.6 135.3V96c0-19.3-15.7-35-35-35s-35 15.7-35 35v175.5c0 19.3 15.7 35 35 35h177.1c19.3 0 35-15.7 35-35s-15.7-35-35-35h-86.6c55.9-56.8 127.8-95.1 207.7-109.9 102.9-19 207.1 3.3 293.3 62.6 86.2 59.4 144.1 148.7 163.1 251.7 19 102.9-3.3 207.1-62.6 293.3-59.3 86.3-148.7 144.2-251.6 163.2-24 4.4-48 6.6-71.9 6.6-78.6 0-155.3-23.7-221.4-69.2-86.3-59.4-144.2-148.8-163.2-251.7-6.7-36.6-8.3-73.7-4.6-110.4 1.9-19.2-12.1-36.4-31.3-38.3-19.2-1.9-36.4 12.1-38.3 31.3-4.3 43.2-2.5 87 5.4 130.1 11.3 61.3 34.3 118.6 68.3 170.2 32.9 49.9 74.6 92.4 123.9 126.4 49.4 34 104 57.8 162.3 70.7 32.7 7.2 65.9 10.9 99.1 10.9 28.1 0 56.2-2.6 84.3-7.8 61.3-11.3 118.6-34.3 170.2-68.3 49.9-32.9 92.4-74.6 126.4-123.9 34-49.4 57.8-104 70.7-162.3 13.5-60.4 14.5-122.1 3.2-183.4z" />
                    </svg>
                    <span class="rollbackButtonText">Rollback Firmware</span>
                </button>

                <!-- Reboot button -->
                <button id="rebootButton" name="rebootButton" type="button" class="rebootButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 1024 1024" fill="#ff3b3b" overflow="hidden" xmlns:v="https://vecta.io/nano">
                        <path d="M313.672 153.539a40.969 40.969 0 0 1 39.731 71.66A327.537 327.537 0 0 0 184.32 512c0 180.982 146.698 327.68 327.68 327.68S839.68 692.982 839.68 512c0-116.675-61.44-222.659-159.785-281.457a40.96 40.96 0 1 1 42.045-70.308A409.354 409.354 0 0 1 921.6 512c0 226.222-183.378 409.6-409.6 409.6S102.4 738.222 102.4 512a409.436 409.436 0 0 1 211.272-358.461zM512 102.4h0q40.96 0 40.96 40.96v409.6q0 40.96-40.96 40.96h0q-40.96 0-40.96-40.96v-409.6q0-40.96 40.96-40.96z"/>
                    </svg>
                    <span class="rebootButtonText">Reboot</span>
                </button>
            </div>

            <!-- Notification Bar -->
            <div id="notificationBar" class="notificationBar">
                <span id="notificationMessage"></span>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p style="text-align:center">PrettyOTA - Version <span id="versionString">1.0.0</span> - © 2025</p>
            <button id="logoutButton" name="logoutButton" type="button" class="logoutButton hidden">
                <svg id="logoutSVG" fill="currentcolor" height="22px" width="22px" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 490.3 490.3">
                    <g>
                        <path d="M0,121.05v248.2c0,34.2,27.9,62.1,62.1,62.1h200.6c34.2,0,62.1-27.9,62.1-62.1v-40.2c0-6.8-5.5-12.3-12.3-12.3s-12.3,5.5-12.3,12.3v40.2c0,20.7-16.9,37.6-37.6,37.6H62.1c-20.7,0-37.6-16.9-37.6-37.6v-248.2c0-20.7,16.9-37.6,37.6-37.6h200.6c20.7,0,37.6,16.9,37.6,37.6v40.2c0,6.8,5.5,12.3,12.3,12.3s12.3-5.5,12.3-12.3v-40.2c0-34.2-27.9-62.1-62.1-62.1H62.1C27.9,58.95,0,86.75,0,121.05z"/>
                        <path d="M385.4,337.65c2.4,2.4,5.5,3.6,8.7,3.6s6.3-1.2,8.7-3.6l83.9-83.9c4.8-4.8,4.8-12.5,0-17.3l-83.9-83.9c-4.8-4.8-12.5-4.8-17.3,0s-4.8,12.5,0,17.3l63,63H218.6c-6.8,0-12.3,5.5-12.3,12.3c0,6.8,5.5,12.3,12.3,12.3h229.8l-63,63C380.6,325.15,380.6,332.95,385.4,337.65z"/>
                    </g>
                </svg>
                <span id="logoutText">Log out</span>
            </button>
        </div>
    </body>
</html>
