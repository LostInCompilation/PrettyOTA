<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="A better looking OTA web updater." />
        <title>PrettyOTA</title>
        <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='512' height='512' xmlns:v='https://vecta.io/nano'%3E%3Cpath d='M0 0h512v512H0V0z' fill='%23454545'/%3E%3Cpath d='M155.358 89.853l3.371-.022 3.702-.008 3.899-.02 12.826-.041 4.433-.012 20.87-.042 23.966-.077 18.589-.048 11.066-.036C292.726 89.32 320.276 95.427 346 120c11.511 11.857 19.348 26.184 24 42l.965 3.105c5.562 21.043 2.684 44.2-5.965 63.895l-1.305 3.02C353.52 253.952 333.683 272.57 311 281c-18.677 6.795-36.629 7.29-56.312 7.195l-6.927-.009-18.07-.049-18.503-.04L175 288l.008 1.852.147 44.672.071 21.603.056 18.836.035 9.967.023 11.146.033 3.313c-.029 7.064-.542 13.21-5.24 18.853-5.864 4.769-10.089 7.293-17.797 7.063-6.109-.797-10.049-3.552-13.773-8.367-3.032-4.304-3.689-7.59-3.71-12.825l-.022-3.726-.008-4.095-.02-4.307-.041-14.153-.012-4.876-.042-22.912-.077-26.427-.048-20.439-.036-12.201-.017-11.487-.02-4.204c-.077-8.341-.097-15.383 5.902-21.797 4.622-4.136 8.932-5.74 15.055-5.742l3.291-.016 3.581.012 3.796-.011 8.165-.008 12.956-.029 36.842-.077 20.356-.055 10.746-.017c23.798.055 43.383-.912 61.55-18.176 10.626-11.198 16.528-25.929 16.207-41.452-.849-16.206-6.779-30.028-17.957-41.919-13.741-11.13-27.272-15.31-44.812-15.271l-3.802-.016-8.137-.018-12.889-.041-32.003-.101-24.901-.083-12.79-.028-9.852-.042-3.543.014c-7.426-.066-14.612-.496-20.61-5.282-4.68-5.881-7.194-10.13-6.965-17.797.797-6.109 3.552-10.049 8.367-13.773 4.115-2.899 7.286-3.688 12.296-3.71z' fill='%232cb3a6'/%3E%3C/svg%3E" />
        <script type="module" crossorigin>
            const sleep=e=>new Promise(t=>setTimeout(t,e));var showTimeout,md5=function(){function e(e,t,n,o,r,l){var a,i;return s((a=s(s(t,e),s(o,l)),i=r,a<<i|a>>>32-i),n)}function t(t,n,o,r,s,l,a){return e(n&o|~n&r,t,n,s,l,a)}function n(t,n,o,r,s,l,a){return e(n&r|o&~r,t,n,s,l,a)}function o(t,n,o,r,s,l,a){return e(n^o^r,t,n,s,l,a)}function r(t,n,o,r,s,l,a){return e(o^(n|~r),t,n,s,l,a)}function s(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return function e(l){l instanceof Uint8Array||(l=new TextEncoder().encode("string"==typeof l?l:JSON.stringify(l)));for(var a,i=[],d=new Uint8Array(l),u=0,_=d.byteLength;u<_;u++)i.push(String.fromCharCode(d[u]));return function e(t){for(var n,o="0123456789abcdef",r="",s=0;s<t.length;s++)r+=o.charAt((n=t.charCodeAt(s))>>>4&15)+o.charAt(15&n);return r}(function e(t){for(var n="",o=0;o<32*t.length;o+=8)n+=String.fromCharCode(t[o>>5]>>>o%32&255);return n}(function e(l,a){l[a>>5]|=128<<a%32,l[14+(a+64>>>9<<4)]=a;for(var i=1732584193,d=-271733879,u=-1732584194,_=271733878,c=0;c<l.length;c+=16){var m=i,$=d,g=u,h=_;d=r(d=r(d=r(d=r(d=o(d=o(d=o(d=o(d=n(d=n(d=n(d=n(d=t(d=t(d=t(d=t(d,u=t(u,_=t(_,i=t(i,d,u,_,l[c+0],7,-680876936),d,u,l[c+1],12,-389564586),i,d,l[c+2],17,606105819),_,i,l[c+3],22,-1044525330),u=t(u,_=t(_,i=t(i,d,u,_,l[c+4],7,-176418897),d,u,l[c+5],12,1200080426),i,d,l[c+6],17,-1473231341),_,i,l[c+7],22,-45705983),u=t(u,_=t(_,i=t(i,d,u,_,l[c+8],7,1770035416),d,u,l[c+9],12,-1958414417),i,d,l[c+10],17,-42063),_,i,l[c+11],22,-1990404162),u=t(u,_=t(_,i=t(i,d,u,_,l[c+12],7,1804603682),d,u,l[c+13],12,-40341101),i,d,l[c+14],17,-1502002290),_,i,l[c+15],22,1236535329),u=n(u,_=n(_,i=n(i,d,u,_,l[c+1],5,-165796510),d,u,l[c+6],9,-1069501632),i,d,l[c+11],14,643717713),_,i,l[c+0],20,-373897302),u=n(u,_=n(_,i=n(i,d,u,_,l[c+5],5,-701558691),d,u,l[c+10],9,38016083),i,d,l[c+15],14,-660478335),_,i,l[c+4],20,-405537848),u=n(u,_=n(_,i=n(i,d,u,_,l[c+9],5,568446438),d,u,l[c+14],9,-1019803690),i,d,l[c+3],14,-187363961),_,i,l[c+8],20,1163531501),u=n(u,_=n(_,i=n(i,d,u,_,l[c+13],5,-1444681467),d,u,l[c+2],9,-51403784),i,d,l[c+7],14,1735328473),_,i,l[c+12],20,-1926607734),u=o(u,_=o(_,i=o(i,d,u,_,l[c+5],4,-378558),d,u,l[c+8],11,-2022574463),i,d,l[c+11],16,1839030562),_,i,l[c+14],23,-35309556),u=o(u,_=o(_,i=o(i,d,u,_,l[c+1],4,-1530992060),d,u,l[c+4],11,1272893353),i,d,l[c+7],16,-155497632),_,i,l[c+10],23,-1094730640),u=o(u,_=o(_,i=o(i,d,u,_,l[c+13],4,681279174),d,u,l[c+0],11,-358537222),i,d,l[c+3],16,-722521979),_,i,l[c+6],23,76029189),u=o(u,_=o(_,i=o(i,d,u,_,l[c+9],4,-640364487),d,u,l[c+12],11,-421815835),i,d,l[c+15],16,530742520),_,i,l[c+2],23,-995338651),u=r(u,_=r(_,i=r(i,d,u,_,l[c+0],6,-198630844),d,u,l[c+7],10,1126891415),i,d,l[c+14],15,-1416354905),_,i,l[c+5],21,-57434055),u=r(u,_=r(_,i=r(i,d,u,_,l[c+12],6,1700485571),d,u,l[c+3],10,-1894986606),i,d,l[c+10],15,-1051523),_,i,l[c+1],21,-2054922799),u=r(u,_=r(_,i=r(i,d,u,_,l[c+8],6,1873313359),d,u,l[c+15],10,-30611744),i,d,l[c+6],15,-1560198380),_,i,l[c+13],21,1309151649),u=r(u,_=r(_,i=r(i,d,u,_,l[c+4],6,-145523070),d,u,l[c+11],10,-1120210379),i,d,l[c+2],15,718787259),_,i,l[c+9],21,-343485551),i=s(i,m),d=s(d,$),u=s(u,g),_=s(_,h)}return[i,d,u,_]}(function e(t){for(var n=Array(t.length>>2),o=0;o<n.length;o++)n[o]=0;for(o=0;o<8*t.length;o+=8)n[o>>5]|=(255&t.charCodeAt(o/8))<<o%32;return n}(a=i.join("")),8*a.length)))}}();const hashFromFile=async e=>new Promise((t,n)=>{let o="",r=new FileReader;r.onload=function(e){let n=new Uint8Array(e.target.result);t(o=md5(n))},r.readAsArrayBuffer(e)});async function runUpdate(e){hideElement("uploadColumn"),hideElement("settingsColumn"),hideElement("boardColumn"),hideElement("buttonColumn"),await sleep(270),showElement("progressColumn");let t=document.getElementById("otaMode").value,n=document.getElementById("rebootCheckboxInput").checked;try{setProgressTitle("Starting OTA Process");let o=await hashFromFile(e),r=await fetch(`/ota/start?mode=${t}&hash=${o}&reboot=${n}`);if(!r.ok)throw Error("Start OTA process failed");let s=new XMLHttpRequest;s.upload.addEventListener("progress",function(e){let t=Math.round(e.loaded/e.total*100);document.getElementById("progressBar").style.width=t+"%",document.getElementById("progressValue").innerHTML=t+"%"},!1),s.upload.onprogress=function(e){if(e.lengthComputable){let t=Math.round(e.loaded/e.total*100);document.getElementById("progressBar").style.width=t+"%",document.getElementById("progressValue").innerHTML=t+"%"}},s.onreadystatechange=async function(){4==s.readyState&&(200==s.status?(document.getElementById("progressBar").style.width="100%",document.getElementById("progressBar").innerHTML="100%",hideElement("progressColumn"),await sleep(270),showElement("successColumn"),setSuccessMessage("Update Successful"),await waitForServerRebootShowResult()):400==s.status?(document.getElementById("progressBar").style.width="100%",document.getElementById("progressBar").innerHTML="100%",hideElement("progressColumn"),await sleep(270),showElement("errorColumn"),setErrorTitle("Upload failed"),setErrorReason(s.responseText)):(document.getElementById("progressBar").style.width="100%",document.getElementById("progressBar").innerHTML="100%",hideElement("progressColumn"),await sleep(270),showElement("errorColumn"),setErrorTitle("Upload failed"),setErrorReason("Server returned status code "+s.status)))};let l=new FormData;l.append("file",e,e.name),s.open("POST","/ota/upload"),s.send(l),setProgressTitle("Uploading "+e.name)}catch(a){hideElement("progressColumn"),await sleep(270),showElement("errorColumn"),setErrorTitle("Upload failed"),setErrorReason(a.message)}}function onFileInput(e){return(hideCustomAlert(),e.length>1)?(showCustomAlert("Only a single .bin file can be uploaded at once."),!1):"bin"!=e[0].name.split(".").pop()?(showCustomAlert("Only .bin files can be uploaded."),!1):void runUpdate(e[0])}document.getElementById("rollbackButton").addEventListener("click",async function(e){hideCustomAlert(),hideElement("uploadColumn"),hideElement("settingsColumn"),hideElement("boardColumn"),hideElement("buttonColumn");let t=new XMLHttpRequest;t.onreadystatechange=async function(){4==t.readyState&&(200==t.status?(showElement("successColumn"),setSuccessMessage("Rollback Successful"),await waitForServerRebootShowResult(!0)):400==t.status?(showElement("errorColumn"),setErrorTitle("Rollback failed"),setErrorReason(t.responseText)):(showElement("errorColumn"),setErrorTitle("Rollback failed"),setErrorReason("Server returned status code "+t.status)))},t.open("POST","/ota/rollback"),t.send()}),document.getElementById("rebootButton").addEventListener("click",async function(e){hideCustomAlert(),hideElement("uploadColumn"),hideElement("settingsColumn"),hideElement("boardColumn"),hideElement("buttonColumn"),await sleep(270),hideElement("successColumnSVG"),setSuccessMessage("Rebooting"),showElement("successColumn");let t=new XMLHttpRequest;t.onreadystatechange=async function(){4==t.readyState&&(200==t.status?await waitForServerRebootShowResult(!0):(hideElement("successColumnLoaderReboot"),document.getElementById("successColumnRebootMessage").innerHTML="Sending reboot request failed. Server returned status code: "+t.status,document.getElementById("goBackButton").disabled=!1,document.getElementById("goBackButton2").disabled=!1))},t.open("POST","/ota/doManualReboot"),t.send()}),document.getElementById("rebootCheckboxInput").addEventListener("click",function(e){localStorage.setItem("reboot_checkbox",document.getElementById("rebootCheckboxInput").checked)});let dropArea=document.getElementById("dropzone");function dropHighlight(e){dropArea.classList.add("dropzone-highlight")}function dropUnhighlight(e){dropArea.classList.remove("dropzone-highlight")}function dropHandler(e){e.preventDefault();onFileInput(e.dataTransfer.files)}function dragOverHandler(e){e.preventDefault()}function showElement(e){document.getElementById(e).classList.remove("hidden")}function hideElement(e){document.getElementById(e).classList.add("hidden")}function setProgressTitle(e){document.getElementById("progressTitle").innerHTML=e}function setSuccessMessage(e){document.getElementById("successMessage").innerHTML=e}function setErrorTitle(e){document.getElementById("errorTitle").innerHTML=e}function setErrorReason(e){document.getElementById("errorReason").innerHTML=e}function showCustomAlert(e,t=!1){document.getElementById("notificationMessage").innerText=e,t?document.getElementById("notificationBar").classList.add("notificationBarSuccess"):document.getElementById("notificationBar").classList.remove("notificationBarSuccess"),document.getElementById("notificationBar").classList.add("show"),clearTimeout(showTimeout),showTimeout=setTimeout(function(){document.getElementById("notificationBar").classList.remove("show")},7e3)}function hideCustomAlert(){clearTimeout(showTimeout),document.getElementById("notificationBar").classList.remove("show")}function resetView(){window.location.reload()}async function queryInfo(){let e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState){if(200==e.status){let t=JSON.parse(this.responseText);document.getElementById("firmware_version_text").innerText=t.firmwareVersion,document.getElementById("sdk_version_text").innerText=t.sdkVersion,document.getElementById("build_time_text").innerText=t.buildDate,t.rollbackPossible?(document.getElementById("rollbackButton").disabled=!1,document.getElementById("rollback_text").style="color:#00ff00;",document.getElementById("rollback_text").innerText="Yes"):(document.getElementById("rollbackButton").disabled=!0,document.getElementById("rollback_text").style="color:#ff5f5f;",document.getElementById("rollback_text").innerText="No")}else 400==e.status?console.log("queryInfo: Server returned "+e.responseText):console.log("queryInfo: Server returned status code "+e.status)}},e.open("GET","/ota/queryInfo",!0),e.send()}async function waitForServerReboot(){let e=1,t=!1;for(await sleep(3100);e<10;){await sleep(1500);try{let n=new XMLHttpRequest;n.onloadend=function(){e=10,t=!0},n.onerror=function(){e++},n.open("GET","/ota/rebootCheck"),n.send()}catch{e++}}return t}async function waitForServerRebootShowResult(e=!1){let t=document.getElementById("rebootCheckboxInput").checked;if(!t&&!e){document.getElementById("successColumnRebootMessage").innerHTML="Auto reboot is disabled. Please reboot manually to use the new firmware.",hideElement("successColumnLoaderReboot");return}document.getElementById("goBackButton").disabled=!0,document.getElementById("goBackButton2").disabled=!0;let n=await waitForServerReboot();document.getElementById("goBackButton").disabled=!1,document.getElementById("goBackButton2").disabled=!1,n?(document.getElementById("successColumnRebootMessage").innerHTML="Reboot has finished, server is running.",hideElement("successColumnLoaderReboot")):(document.getElementById("successColumnRebootMessage").innerHTML="Could not reconnect. Reboot could have failed or the new firmware does not behave correctly.",hideElement("successColumnLoaderReboot"))}dropArea.addEventListener("dragover",dragOverHandler,!1),dropArea.addEventListener("drop",dropHandler,!1),dropArea.addEventListener("dragenter",dropHighlight,!1),dropArea.addEventListener("dragover",dropHighlight,!1),dropArea.addEventListener("dragleave",dropUnhighlight,!1),dropArea.addEventListener("drop",dropUnhighlight,!1),dropArea.addEventListener("click",function(e){document.getElementById("fileInput").click()}),window.onFileInput=onFileInput,window.resetView=resetView,window.onload=()=>{"reboot_checkbox"in localStorage||localStorage.setItem("reboot_checkbox",!0),document.getElementById("rebootCheckboxInput").checked="true"==localStorage.getItem("reboot_checkbox"),queryInfo()};
        </script>
        <style>
            html {font-family: sans-serif;}body {background-color: #191919;color: #e6e6e6;}.footer {position: fixed;left: 0;bottom: 0;width: 100%;height: 28px;line-height: 3px;background-color: #313131;color: #898989;text-align: center;font-size: 13px;}.mainDiv {display: flex;margin-top: 3rem;margin-bottom: 4rem;flex-direction: column;align-items: center;}.headerRow {border-bottom: 1px solid #e6e6e61c;margin-left: 15px;margin-right: 15px;}.loaderBoxStack {scale: 2.25;height: 50px;width: 40px;margin-bottom: 55px;margin-top: 47px;}.box {position: relative;opacity: 0;left: 10px;}.side-left {position: absolute;background-color: hsl(173, 60%, 22%);width: 19px;height: 5px;transform: skew(0deg, -25deg);top: 14px;left: 10px;}.side-right {position: absolute;background-color: hsl(173, 60%, 43%);width: 19px;height: 5px;transform: skew(0deg, 25deg);top: 14px;left: -9px;}.side-top {position: absolute;background-color: hsl(173, 60%, 35%);width: 20px;height: 20px;rotate: 45deg;transform: skew(-20deg, -20deg);}.box-1 {animation: from-left 4s infinite;}.box-2 {animation: from-right 4s infinite;animation-delay: 1s;}.box-3 {animation: from-left 4s infinite;animation-delay: 2s;}.box-4 {animation: from-right 4s infinite;animation-delay: 3s;}@keyframes from-left {0% {z-index: 20;opacity: 0;translate: -20px -6px;}20% {z-index: 10;opacity: 1;translate: 0px 0px;}40% {z-index: 9;translate: 0px 4px;}60% {z-index: 8;translate: 0px 8px;}80% {z-index: 7;opacity: 1;translate: 0px 12px;}100% {z-index: 5;translate: 0px 30px;opacity: 0;}}@keyframes from-right {0% {z-index: 20;opacity: 0;translate: 20px -6px;}20% {z-index: 10;opacity: 1;translate: 0px 0px;}40% {z-index: 9;translate: 0px 4px;}60% {z-index: 8;translate: 0px 8px;}80% {z-index: 7;opacity: 1;translate: 0px 12px;}100% {z-index: 5;translate: 0px 30px;opacity: 0;}}.loaderReboot {display: inline-block;width: 13px;height: 13px;padding: 4.5px;margin-top: 2px;border-radius: 50%;background: #25b09b;--_m: conic-gradient(#0000 10%, #000), linear-gradient(#000 0 0) content-box;-webkit-mask: var(--_m);mask: var(--_m);-webkit-mask-composite: source-out;mask-composite: subtract;animation: l3 1s infinite linear;}@keyframes l3 {to{transform: rotate(1turn);}}.uploadColumn {margin-top: 40px;margin-bottom: 25px;opacity: 1;transition: opacity 0.25s ease-in, display 0.25s ease-in allow-discrete;}.dropzone {width: 340px;height: 140px;border: 1px dashed #e6e6e633;border-radius: 10px;font-size: 0.875rem;line-height: 1.25rem;text-align: center;transition: border-color 270ms ease-out;cursor: pointer;}.dropzone:hover {border-color: #e6e6e6b8;}.dropzone-highlight {border-color: #30b4a6;}.dropzoneText {margin: 40px;}.dropzoneTextDim {color: #7e7e7e;}.columnHeader {display: flex;flex-direction: row;justify-content: center;align-items: center;font-size: 12px;line-height: 16px;text-transform: uppercase;user-select: none;margin-top: 1px;}.columnHeaderText {margin-top: 16px;margin-bottom: 7px;color: #b0b0b0;}.column {width: 340px;border: 1px solid #e6e6e633;border-radius: 10px;margin-top: 25px;opacity: 1;transition: opacity 0.25s ease-in, display 0.25s ease-in allow-discrete;}.columnContent {display: flex;flex-direction: column;line-height: 0.6;margin-top: 15px;margin-left: 15px;margin-bottom: 8px;width: 305px;}.columnContentEntry {display: flex;flex-direction: row;justify-content: space-between;align-items: center;}.columnContentValue {color: #b0b0b0;}select {color: #e6e6e6;background: #242424;padding: 4px 12px;border: 1px solid #383838;border-radius: 6px;font-size: 14px;line-height: 20px;appearance: none;}select:hover {border-color: #006bff;}.rebootCheckboxInput {display: none;}.toggleSwitch {display: flex;align-items: center;justify-content: center;position: relative;width: 39px;height: 21px;background-color: #394158;border-radius: 25px;cursor: pointer;transition-duration: 0.15s;}.toggleSwitch::after {content: "";position: absolute;height: 6px;width: 6px;left: 3px;background-color: #e6e6e6;border-radius: 50%;transition-duration: 0.2s;box-shadow: 5px 2px 7px #08080842;border: 5px solid #e6e6e6;}.rebootCheckboxInput:checked + .toggleSwitch::after {transform: translateX(17px);transition-duration: 0.15s;background-color: #e6e6e6;}.rebootCheckboxInput:checked + .toggleSwitch {background-color: #006bff;transition-duration: 0.15s;}.statusColumn {display: flex;margin-top: 30px;flex-direction: column;align-items: center;}.statusTitleText {margin-top: 15px;margin-bottom: 5px;}.detailText {font-size: 14px;color: #b0b0b0;margin-top: 5px;margin-bottom: 5px;}.waitForRebootDetailText {font-size: 14px;color: #b0b0b0;margin-top: 5px;margin-bottom: 5px;padding-left: 10px;}.successColumnWaitForReboot {display: flex;margin-top: 15px;}.waitForReboot {display: flex;margin-top: 18px;}.goBackButton {display: flex;background: #0e121f;color: #e4e6eb;cursor: pointer;width: 120px;height: 42px;font-size: 13px;border: 2px solid #2d5fec;border-radius: 9px;align-items: center;box-shadow: 0 5px 15px #00000092;transition: all 0.35s ease;margin-top: 35px;}.goBackButton:hover {background-color: #2d5fec;}.goBackButton > svg {width: 35px;transition: transform 0.3s normal;scale: 1.3;}.goBackButton:hover svg {transform: translateX(-5px);}.goBackButton:active {transform: scale(0.95);}.goBackButton:disabled {border: 1px solid #808080;background-color: #383838;color: #9a9a9a;box-shadow: none;pointer-events: none;}.rollbackButton {display: flex;background: #0e121f;color: #e4e6eb;cursor: pointer;width: 200px;height: 47px;font-size: 15px;border: 2px solid #2d5fec;border-radius: 8px;align-items: center;box-shadow: 0 5px 15px #00000092;transition: all 0.25s ease;margin-bottom: 8px;opacity: 1;}.rollbackButton:hover {background-color: #2d5fec;}.rollbackButton > svg {position: absolute;width: 42px;transition: transform 0.5s normal;scale: 1.2;}.rollbackButton:hover #svg_rotate {transform: rotate(-180deg);}.rollbackButton:active {transform: scale(0.95);}.rollbackButton:disabled {border: 1px solid #808080;background-color: #383838;color: #9a9a9a;box-shadow: none;pointer-events: none;}.rollbackButtonText {margin-left: 44px;}.rebootButton {display: flex;background: #0e121f;color: #e4e6eb;cursor: pointer;width: 200px;height: 47px;font-size: 15px;border: 2px solid #2d5fec;border-radius: 9px;align-items: center;box-shadow: 0 5px 15px #00000092;transition: all 0.25s ease;margin-top: 8px;opacity: 1;}.rebootButton:hover {background-color: #2d5fec;}.rebootButton > svg {position: absolute;width: 43px;scale: 1.14;}.rebootButton:active {transform: scale(0.95);}.rebootButton:disabled {border: 1px solid #808080;background-color: #383838;color: #9a9a9a;box-shadow: none;pointer-events: none;}.rebootButtonText {margin-left: 72px;}.progressBarContainer {display: inline-flex;flex-direction: row;gap: 15px;align-items: center;}.progress {background: #242526;border-radius: 10px;padding: 0px;height: 10px;width: 270px;}.progress-value {transition : width 0.85s normal;border-radius: 10px;background: #2563eb;height: 10px;width: 0px;}.progressValueText {font-size: 14px;color: #b0b0b0;margin-top: 5px;margin-bottom: 5px;width: 25px;}.notificationBar {visibility: hidden;position: fixed;top: 0px;height: 38px;line-height: 38px;width: 80%;background: #cc3445;text-align: center;color: #ffffff;font-size: 14px;font-weight: lighter;opacity: 0;transition: opacity 250ms ease-in, visibility 0ms ease-in 250ms;border-radius: 7px;}.notificationBar.show {visibility: visible;opacity: 1;}.notificationBarSuccess {background: #21c322;}.hidden {display: none;opacity: 0;}
        </style>
    </head>
    <body>
        <div class="mainDiv">
            <!-- Logo -->
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="340px" height="69px" viewBox="0 0 27190 5630">
                <path d="M6340 773a194 194 0 00-40 320c62 57 60 57 755 57 700 0 706 0 830 60a590 590 0 01 4 1053c-135 66-140 67-857 67-904 0-801-113-802 886v730l23 45a194 194 0 00 320 40c57-63 57-65 57-709V2730h503c703 0 812-18 1038-170a990 990 0 00-167-1733c-174-74-143-71-920-75l-700-3-44 24m7240 10c-30 16-51 37-67 67l-24 44 4 1200c3 1340-3 1224 72 1421 193 513 927 848 930 424 0-118-36-163-165-204a648 648 0 01-413-419c-20-59-21-84-25-719l-3-657h235a1880 1880 0 00 263-10c127-49 142-230 26-310-36-25-40-25-280-28l-243-3v-342c0-373-3-390-61-444-55-50-174-60-250-20m1490-3c-20 10-48 34-60 52l-24 33-3 1175c-4 1366-6 1333 108 1560 240 478 890 727 890 340 0-112-40-164-156-204a631 631 0 01-430-456c-17-60-19-119-19-700v-635l245-5c305-6 360-31 360-167 0-152-63-182-377-183H15370l-3-364c-3-410 0-396-84-443-52-30-162-31-216-3m-3560 756c-1460 227-1404 2434 65 2605 588 68 1356-430 1104-717-94-108-205-95-336 40a871 871 0 01-1495-422l-8-32H11840c1215 0 1140 14 1139-216 0-766-715-1376-1473-1258m-1601 30c-480 131-830 523-932 1039-21 106-33 1239-14 1330 40 190 290 225 371 50 17-37 19-77 19-600 0-712 6-762 100-961a864 864 0 01 600-485c123-33 180-96 180-200 0-163-123-228-324-173m6520 10a242 242 0 00-126 110c-41 84-50 60 440 1179l450 1030-162 380c-216 507-210 646 31 645 122 0 143-33 340-497a13328 13328 0 01 206-473c4-14 208-498 453-1075 258-610 447-1068 450-1092 20-176-228-283-345-150-18 20-156 336-392 895-341 807-365 860-377 835-158-368-732-1670-750-1700-40-69-140-108-219-86m-4890 360c-334 71-695 442-695 714 0 5 326 9 865 9h865l-7-33c-87-459-576-787-1028-690" fill="#2cb4a4" fill-rule="evenodd"/>
                <path d="M2330 599a154420 154420 0 01-773 446 32852 32852 0 01-497 287l-380 220c-170 98-176 108-98 155l554 320 60 33 205-123c170-102 326-194 410-242a161187 161187 0 00 554-320c138-76 778-445 784-451 13-12-616-388-668-400a720 720 0 00-151 75m17974 117C18947 900 18380 2630 19344 3637c872 911 2374 555 2780-660 402-1202-586-2430-1820-2261m1995 57a193 193 0 00-56 304c68 78-9 73 1118 73h1006l44-23a200 200 0 00-2-357c-37-20-66-20-1052-20h-1014l-44 23m3296-9a250 250 0 00-108 108 264260 264260 0 00-1220 2988 205 205 0 00 114 220c62 32 1550 30 1617-1 110-54 140-206 60-304-64-77-40-75-697-75-520 0-583-2-577-15 14-39 938-2290 940-2292 1-2 233 559 516 1245 641 1558 571 1405 655 1443 142 65 310-50 292-200-7-60-1210-3004-1246-3051-57-74-246-110-346-66m-22450 288c-127 75-150 88-620 358a590130 590130 0 00-1030 595C1228 2160 1260 2090 1260 2517v362l58 32 130 76c115 70 107 94 108-317l2-355 98-59 141-82a40360 40360 0 00 445-255 726790 726790 0 00 1242-717c94-54 98-48-81-151-146-85-113-85-258 0m17240 60c-1055 143-1498 1463-753 2244 798 836 2172 247 2172-930 0-792-674-1416-1419-1314M3450 1347l-485 280a478065 478065 0 00-1117 644c-153 85-153 81-17 158l289 166c405 234 334 218 510 116 74-43 153-89 175-100A113105 113105 0 01 3846 2010c580-332 596-343 563-375-8-7-90-57-184-110-440-252-500-287-510-296-20-20-57-3-265 118m19836 208c-20 7-51 26-67 40-63 60-60-2-57 1245l3 1135 23 33c92 128 277 120 349-17l23-44V2826c0-1257 5-1164-73-1233-58-50-128-64-200-38M474 1743c-3 6-4 516-3 1131l3 1120 180 104a27377 27377 0 00 300 172c5 5 102 60 215 125a116150 116150 0 01 1070 617c150 87 173 98 193 87 22-13 27-2223 4-2250-6-10-106-70-222-136a26643 26643 0 01-468-270c-92-56-87-75-87 385 0 217 0 396-3 398-5 5-500-277-510-290-3-6-7-198-7-427v-417l-88-50-122-70c-20-10-102-58-183-106-256-149-262-151-272-123m3840 59-165 96a40221 40221 0 00-522 300 112703 112703 0 00-688 400 6501 6501 0 00-432 255c-18 29-10 2235 9 2245 22 13 36 7 173-73a51094 51094 0 01 630-365 250144 250144 0 01 1090-628c25-13 50-30 58-35 24-20 12-2261-13-2264-11-1-74 30-140 69" fill="#ededed" fill-rule="evenodd"/>
            </svg>

            <!-- Upload column -->
            <div id="uploadColumn" class="uploadColumn">
                <!-- Drop zone -->
                <form>
                    <div id="dropzone" class="dropzone">
                        <p class="dropzoneText">Drag and drop here<br /><span class="dropzoneTextDim">or<br />click to select (.bin) file</span></p>
                        <input type="file" id="fileInput" class="hidden" accept=".bin, .bin.gz" onchange="onFileInput(files)" />
                    </div>
                </form>
            </div>

            <!-- Progress column -->
            <div id="progressColumn" class="statusColumn hidden">
                <!--<div class="loaderProgress"></div>-->
                <div class="loaderBoxStack">
                    <div class="box box-1">
                        <div class="side-left"></div>
                        <div class="side-right"></div>
                        <div class="side-top"></div>
                    </div>
                    <div class="box box-2">
                        <div class="side-left"></div>
                        <div class="side-right"></div>
                        <div class="side-top"></div>
                    </div>
                    <div class="box box-3">
                        <div class="side-left"></div>
                        <div class="side-right"></div>
                        <div class="side-top"></div>
                    </div>
                    <div class="box box-4">
                        <div class="side-left"></div>
                        <div class="side-right"></div>
                        <div class="side-top"></div>
                    </div>
                </div>
                <p id="progressTitle" class="detailText"></p>
                <div class="progressBarContainer">
                    <div class="progress">
                        <div id="progressBar" class="progress-value" style="width: 0%"></div>
                    </div>
                    <p id="progressValue" class="progressValueText">0%</p>
                </div>
            </div>

            <!-- Success column -->
            <div id="successColumn" class="statusColumn hidden">
                <svg id="successColumnSVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 538 537" width="60px" height="60px" version="1.1">
                    <path fill="#0fc93b" stroke="none" fill-rule="evenodd" d="M 233.085 2.036 C -14.768 35.915, -85.223 363.031, 126.652 496.197 C 295.933 602.593, 525.799 486.284, 536.708 288.715 C 537.035 282.784, 537.685 277.695, 538.152 277.406 C 539.372 276.652, 539.226 258, 538 258 C 537.434 258, 536.992 255.071, 536.982 251.250 C 536.945 237.633, 532.042 209.988, 526.311 191.084 C 488.066 64.926, 362.980 -15.719, 233.085 2.036 M 252 53.661 C 70.486 71.365, -11.158 285.417, 113.467 416.864 C 238.518 548.760, 462.949 472.177, 482.930 290.789 C 497.452 158.962, 382.507 40.933, 252 53.661 M 300.500 230.599 C 261.450 269.850, 229.053 301.972, 228.506 301.982 C 227.959 301.992, 213.446 287.940, 196.255 270.755 L 164.997 239.509 146.251 258.256 L 127.505 277.002 178.004 327.501 L 228.503 378.001 319.496 287.004 L 410.488 196.008 392.004 177.504 C 381.838 167.327, 373.066 159.053, 372.510 159.118 C 371.955 159.182, 339.550 191.349, 300.500 230.599 M 0.365 268.500 C 0.368 274, 0.536 276.122, 0.738 273.216 C 0.941 270.311, 0.939 265.811, 0.734 263.216 C 0.528 260.622, 0.363 263, 0.365 268.500" />
                </svg>
                <p id="successMessage" class="statusTitleText">Update Successful</p>
                <div class="successColumnWaitForReboot">
                    <span id="successColumnLoaderReboot" class="loaderReboot"></span>
                    <p id="successColumnRebootMessage" class="waitForRebootDetailText">Rebooting device...</p>
                </div>
                <button disabled id="goBackButton" onclick="resetView()" type="button" class="goBackButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14px" height="14px" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m12 19-7-7 7-7" />
                        <path d="M19 12H5" />
                    </svg>
                    Go Back
                </button>
            </div>

            <!-- Error column -->
            <div id="errorColumn" class="statusColumn hidden">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 538 537" width="60px" height="60px" version="1.1">
                    <path fill="#ff2222" stroke="none" fill-rule="evenodd" d="M 245 0.663 C 19.260 22.766, -80.448 293.706, 77.480 455.869 C 234.007 616.593, 513.757 521.166, 535.888 299.500 C 536.437 294, 537.413 284.240, 538.056 277.811 C 538.920 269.171, 538.940 263.955, 538.130 257.811 C 537.528 253.240, 536.535 244.325, 535.924 238 C 522.229 96.258, 387.900 -13.329, 245 0.663 M 249.457 53.984 C 79.723 71.944, -4.448 265.960, 99.342 400 C 216.194 550.907, 457.573 484.562, 482.454 294.699 C 500.044 160.463, 383.273 39.824, 249.457 53.984 M 177.662 176.838 L 158.839 195.680 195.170 231.830 L 231.500 267.980 195.202 304.293 L 158.904 340.606 175.323 357.053 C 184.354 366.099, 192.942 374.606, 194.407 375.958 L 197.073 378.417 233 342.500 L 268.927 306.583 271.563 309.042 C 273.012 310.394, 289.273 326.462, 307.697 344.750 C 326.122 363.038, 341.494 378, 341.858 378 C 342.222 378, 350.837 369.674, 361.002 359.497 L 379.485 340.995 343.244 304.744 L 307.003 268.493 343.246 232.251 L 379.488 196.008 360.502 177.002 L 341.515 157.995 305.257 194.242 L 269 230.490 232.743 194.242 L 196.485 157.995 177.662 176.838 M 0.320 268 C 0.320 271.575, 0.502 273.038, 0.723 271.250 C 0.945 269.462, 0.945 266.538, 0.723 264.750 C 0.502 262.962, 0.320 264.425, 0.320 268" />
                </svg>
                <p id="errorTitle" class="statusTitleText">Update failed</p>
                <p id="errorReason" class="detailText">Please try again</p>
                <button id="goBackButton2" onclick="resetView()" type="button" class="goBackButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m12 19-7-7 7-7" />
                        <path d="M19 12H5" />
                    </svg>
                    Go Back
                </button>
            </div>

            <!-- Board info column -->
            <div id="boardColumn" class="column">
                <div class="columnHeader">
                    <p class="columnHeaderText">Board info</p>
                </div>
                <div class="headerRow"></div>
                <div class="columnContent">
                    <div class="columnContentEntry">
                        <p>Firmware version</p>
                        <span id="firmware_version_text" class="columnContentValue"></span>
                    </div>
                    <div class="columnContentEntry">
                        <p>SDK version</p>
                        <span id="sdk_version_text" class="columnContentValue"></span>
                    </div>
                    <div class="columnContentEntry">
                        <p>Build date</p>
                        <span id="build_time_text" class="columnContentValue"></span>
                    </div>
                    <div class="columnContentEntry">
                        <p>Rollback possible</p>
                        <span id="rollback_text" class="columnContentValue"></span>
                    </div>
                </div>
            </div>

            <!-- Settings column -->
            <div id="settingsColumn" class="column">
                <div class="columnHeader">
                    <p class="columnHeaderText">Settings</p>
                </div>
                <div class="headerRow"></div>
                <div class="columnContent">
                    <div class="columnContentEntry">
                        <p>OTA Mode</p>
                        <select id="otaMode">
                            <option value="fr" selected>Firmware</option>
                            <option value="fs">File system</option>
                        </select>
                    </div>
                    <div class="columnContentEntry">
                        <p>Reboot after update</p>
                        <input type="checkbox" id="rebootCheckboxInput" class="rebootCheckboxInput" />
                        <label for="rebootCheckboxInput" class="toggleSwitch"></label>
                    </div>
                </div>
            </div>

            <!-- Button column -->
            <div id="buttonColumn" class="statusColumn">
                <!-- Rollback button -->
                <form>
                    <button disabled id="rollbackButton" name="rollbackButton" type="button" class="rollbackButton">
                        <svg width="20px" height="20px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="white" stroke="white">
                            <path d="M513 203.1c-19.3 0-35 15.7-35 35v294.2c0 12.5 6.7 24 17.5 30.3L651 652.7c5.5 3.2 11.6 4.7 17.5 4.7 12.1 0 23.8-6.3 30.3-17.5 9.7-16.7 4-38.1-12.8-47.8l-138.1-80v-274c0.1-19.3-15.6-35-34.9-35z" />
                        </svg>
                        <svg id="svg_rotate" width="20px" height="20px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="white" stroke="white">
                            <path d="M966.2 428.3c-11.3-61.3-34.3-118.6-68.3-170.2-32.9-49.9-74.6-92.4-123.9-126.4-49.4-34-104-57.8-162.3-70.7-60.4-13.4-122.1-14.4-183.4-3.1-96.9 17.8-183.8 65.1-250.6 135.3V96c0-19.3-15.7-35-35-35s-35 15.7-35 35v175.5c0 19.3 15.7 35 35 35h177.1c19.3 0 35-15.7 35-35s-15.7-35-35-35h-86.6c55.9-56.8 127.8-95.1 207.7-109.9 102.9-19 207.1 3.3 293.3 62.6 86.2 59.4 144.1 148.7 163.1 251.7 19 102.9-3.3 207.1-62.6 293.3-59.3 86.3-148.7 144.2-251.6 163.2-24 4.4-48 6.6-71.9 6.6-78.6 0-155.3-23.7-221.4-69.2-86.3-59.4-144.2-148.8-163.2-251.7-6.7-36.6-8.3-73.7-4.6-110.4 1.9-19.2-12.1-36.4-31.3-38.3-19.2-1.9-36.4 12.1-38.3 31.3-4.3 43.2-2.5 87 5.4 130.1 11.3 61.3 34.3 118.6 68.3 170.2 32.9 49.9 74.6 92.4 123.9 126.4 49.4 34 104 57.8 162.3 70.7 32.7 7.2 65.9 10.9 99.1 10.9 28.1 0 56.2-2.6 84.3-7.8 61.3-11.3 118.6-34.3 170.2-68.3 49.9-32.9 92.4-74.6 126.4-123.9 34-49.4 57.8-104 70.7-162.3 13.5-60.4 14.5-122.1 3.2-183.4z" />
                        </svg>
                        <span class="rollbackButtonText">Rollback Firmware</span>
                    </button>
                </form>

                <!-- Reboot button -->
                <form>
                    <button id="rebootButton" name="rebootButton" type="button" class="rebootButton">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 1024 1024" fill="#ff3b3b" overflow="hidden" xmlns:v="https://vecta.io/nano">
                            <path d="M313.672 153.539a40.969 40.969 0 0 1 39.731 71.66A327.537 327.537 0 0 0 184.32 512c0 180.982 146.698 327.68 327.68 327.68S839.68 692.982 839.68 512c0-116.675-61.44-222.659-159.785-281.457a40.96 40.96 0 1 1 42.045-70.308A409.354 409.354 0 0 1 921.6 512c0 226.222-183.378 409.6-409.6 409.6S102.4 738.222 102.4 512a409.436 409.436 0 0 1 211.272-358.461zM512 102.4h0q40.96 0 40.96 40.96v409.6q0 40.96-40.96 40.96h0q-40.96 0-40.96-40.96v-409.6q0-40.96 40.96-40.96z"/>
                        </svg>
                        <span class="rebootButtonText">Reboot</span>
                    </button>
                </form>
            </div>
            
            <!-- Notification Bar -->
            <div id="notificationBar" class="notificationBar">
                <span id="notificationMessage"></span>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <p>PrettyOTA - Version 0.2 - © 2025</p>
        </div>
    </body>
</html>